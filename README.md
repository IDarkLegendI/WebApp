# Развертывание веб-приложения в Kubernetes

Этот проект содержит манифест Kubernetes для развертывания веб-приложения с учетом требований по минимальному потреблению ресурсов, отказоустойчивости и управления инициализацией подов.

## Задача

Опишите решение для веб-приложения в Kubernetes в виде YAML-манифеста. Оставляйте в коде комментарии по принятым решениям. Имеются следующие вводные:

- У нас Kubernetes кластер, в котором пять нод.
- Приложение испытывает постоянную стабильную нагрузку в течение суток без значительных колебаний. 3 пода справляются с нагрузкой.
- На первые запросы приложению требуется значительно больше ресурсов CPU, в дальнейшем потребление ровное в районе 0.1 CPU.
- По памяти всегда “ровно” в районе 128M memory.
- Приложение требует около 5-10 секунд для инициализации.

Что хотим?

- Минимальное потребление ресурсов от этого deployment’а.
- Размещение подов на разных нодах для отказоустойчивости.
- Чтобы под не обрабатывал запросы до завершения инициализации.

## Структура манифеста

Манифест состоит из двух основных ресурсов:

1. **Deployment**: управляет развертыванием приложения с заданным количеством реплик (подов).
2. **PodDisruptionBudget**: обеспечивает доступность подов во время планового обслуживания.

### Deployment

- **replicas**: Установлено значение 3, чтобы обеспечить стабильную нагрузку в течение суток.
- **affinity**: Настройка `podAntiAffinity` гарантирует, что поды размещаются на разных нодах для повышения отказоустойчивости.
- **containers**:
    - **image**: Укажите образ вашего приложения, например, `webApp:latest`.
    - **resources**: Установлены запросы и лимиты для CPU и памяти.
    - **readinessProbe**: Проверяет готовность пода обрабатывать запросы. Путь для проверки настроен на `/health`, с задержкой в 10 секунд перед первой проверкой.
    - **livenessProbe**: Проверяет живость пода, с задержкой в 15 секунд перед первой проверкой.

### PodDisruptionBudget

- **minAvailable**: Установлено значение 1, чтобы гарантировать доступность как минимум одного пода во время обслуживания.

## Установка

Чтобы развернуть приложение, выполните следующую команду:

```bash 
kubectl apply -f deployment.yaml
